<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Management - Admin Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }

        /* Navbar */
        .navbar {
            background: #02080d
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .navbar h1 {
            font-size: 24px;
        }

        .filter-section {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .filter-section select {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .filter-section button {
            padding: 8px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .filter-section button:hover {
            background: #c0392b;
        }

        /* Layout */
        .container {
            display: flex;
            height: calc(100vh - 60px);
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: white;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .sidebar h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .availability-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .availability-group label {
            font-weight: normal;
            margin: 0;
        }

        .add-fleet-btn {
            width: 100%;
            padding: 12px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        .add-fleet-btn:hover {
            background: #229954;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .fleet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        /* Fleet Card */
        .fleet-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .vehicle-icon {
            text-align: center;
            margin-bottom: 15px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .vehicle-icon img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .fleet-info {
            margin-bottom: 15px;
        }

        .fleet-info p {
            margin: 8px 0;
            color: #555;
        }

        .fleet-info strong {
            color: #2c3e50;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-available {
            background: #d4edda;
            color: #155724;
        }

        .status-unavailable {
            background: #f8d7da;
            color: #721c24;
        }

        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .card-actions button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .update-btn {
            background: #3498db;
            color: white;
        }

        .update-btn:hover {
            background: #2980b9;
        }

        .availability-btn {
            background: #f39c12;
            color: white;
        }

        .availability-btn:hover {
            background: #e67e22;
        }

        .delete-btn {
            background: #e74c3c;
            color: white;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state h3 {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div class="navbar">
        <h1>Fleet Management Dashboard</h1>
        <div class="filter-section">
            <select id="categoryFilter">
                <option value="All">All Categories</option>
                <option value="Auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
            </select>
            <select id="availabilityFilter">
                <option value="All">All Availability</option>
                <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
            </select>
            <button id="clearFilterBtn">Clear Filter</button>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar - Fleet Form --->
        <div class="sidebar">
            <h2>Add Fleet</h2>
            <form id="fleetForm">
                <div class="form-group">
                    <label for="regNo">Reg No of Vehicle</label>
                    <input type="text" id="regNo" required>
                </div>
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" required>
                        <option value="">Select Category</option>
                        <option value="Auto">Auto</option>
                        <option value="Car">Car</option>
                        <option value="Truck">Truck</option>
                        <option value="Bus">Bus</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="driverName">Driver Name</label>
                    <input type="text" id="driverName" required>
                </div>
                <div class="form-group">
                    <label>Is Available</label>
                    <div class="availability-group">
                        <input type="radio" id="available" name="availability" value="Available" checked>
                        <label for="available">Available</label>
                        <input type="radio" id="unavailable" name="availability" value="Unavailable">
                        <label for="unavailable">Unavailable</label>
                    </div>
                </div>
                <button type="submit" class="add-fleet-btn">Add Fleet</button>
            </form>
        </div> 

         <!-- Main Content - Fleet Cards -->
        <div class="main-content">
            <div class="fleet-grid" id="fleetGrid">
                <div class="empty-state">
                    <h3>No Fleet Vehicles Yet</h3>
                    <p>Add your first vehicle using the form on the left</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let fleets = [];
        let editingIndex = -1;

        // Vehicle imagess
        const vehicleImages = {
            'Auto': 'https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png',
            'Car': 'https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png',
            'Truck': 'https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png',
            'Bus': 'https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png'
        };

        // Load fleets from localStorage
        function loadFleets() {
            const saved = localStorage.getItem('fleets');
            if (saved) {
                fleets = JSON.parse(saved);
                renderFleets();
            }
        }

        // Save fleets to localStorage
        function saveFleets() {
            localStorage.setItem('fleets', JSON.stringify(fleets));
        }

        //// Form submission
        document.getElementById('fleetForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const regNo = document.getElementById('regNo').value.trim();
            const category = document.getElementById('category').value;
            const driverName = document.getElementById('driverName').value.trim();
            const availability = document.querySelector('input[name="availability"]:checked').value;
            
            // Validation
            if (!regNo || !category || !driverName) {
                alert('Please fill all required fields');
                return;
            }

            if (editingIndex === -1) {
                // Add new fleet
                fleets.push({
                    regNo,
                    category,
                    driverName,
                    availability
                });
                alert('Fleet added successfully!');
            } else {
                // Update existing fleet
                fleets[editingIndex] = {
                    regNo,
                    category,
                    driverName,
                    availability
                };
                alert('Fleet updated successfully!');
                editingIndex = -1;
                document.querySelector('.add-fleet-btn').textContent = 'Add Fleet';
            }
            
            saveFleets();
            renderFleets();
            this.reset();
        });

        // Render fleet cards
        function renderFleets() {
            const grid = document.getElementById('fleetGrid');
            const categoryFilter = document.getElementById('categoryFilter').value;
            const availabilityFilter = document.getElementById('availabilityFilter').value;
            
            let filteredFleets = fleets.filter(fleet => {
                const categoryMatch = categoryFilter === 'All' || fleet.category === categoryFilter;
                const availabilityMatch = availabilityFilter === 'All' || fleet.availability === availabilityFilter;
                return categoryMatch && availabilityMatch;
            });
            
            if (filteredFleets.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <h3>No Fleet Vehicles Found</h3>
                        <p>Try adjusting your filters or add a new vehicle</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = filteredFleets.map((fleet, index) => {
                const actualIndex = fleets.indexOf(fleet);
                return `
                    <div class="fleet-card">
                        <div class="vehicle-icon">
                            <img src="${vehicleImages[fleet.category]}" alt="${fleet.category}">
                        </div>
                        <div class="fleet-info">
                            <p><strong>Reg No:</strong> ${fleet.regNo}</p>
                            <p><strong>Category:</strong> ${fleet.category}</p>
                            <p><strong>Driver:</strong> ${fleet.driverName}</p>
                            <p><strong>Status:</strong> <span class="status-badge status-${fleet.availability.toLowerCase()}">${fleet.availability}</span></p>
                        </div>
                        <div class="card-actions">
                            <button class="update-btn" onclick="updateDriver(${actualIndex})">Update Driver</button>
                            <button class="availability-btn" onclick="toggleAvailability(${actualIndex})">Change Availability</button>
                            <button class="delete-btn" onclick="deleteFleet(${actualIndex})">Delete Vehicle</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Update driver
        function updateDriver(index) {
            const newDriverName = prompt('Enter new driver name:');
            if (newDriverName && newDriverName.trim()) {
                fleets[index].driverName = newDriverName.trim();
                saveFleets();
                renderFleets();
                alert('Driver updated successfully!');
            } else if (newDriverName !== null) {
                alert('Driver name cannot be empty');
            }
        }

        // Toggle availability 
        function toggleAvailability(index) {
            fleets[index].availability = fleets[index].availability === 'Available' ? 'Unavailable' : 'Available';
            saveFleets();
            renderFleets();
        }

        // Delete fleet
        function deleteFleet(index) {
            if (confirm('Are you sure you want to delete this vehicle? This action cannot be undone.')) {
                fleets.splice(index, 1);
                saveFleets();
                renderFleets();
                alert('Vehicle deleted successfully!');
            }
        }

        // Filter handlers
        document.getElementById('categoryFilter').addEventListener('change', renderFleets);
        document.getElementById('availabilityFilter').addEventListener('change', renderFleets);
        document.getElementById('clearFilterBtn').addEventListener('click', function() {
            document.getElementById('categoryFilter').value = 'All';
            document.getElementById('availabilityFilter').value = 'All';
            renderFleets();
        });

        // Initialize
        loadFleets();
    </script>
</body>
</html>

